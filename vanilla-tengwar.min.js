(function(){function F(a,e){return a.split(";").map(function(a){var a=a.split(":"),f=a.shift(),a=a.length?a.shift().split(","):[],d=e(f);a.forEach(function(a){"tilde-above"===a?d.addTildeAbove():"tilde-below"===a?d.addBarBelow():"y"===a?d.addBelow("y"):"s"===a||"s-inverse"===a||"s-extended"===a||"s-flourish"===a?"s"===a&&("calma"===f||"quesse"===f)?d.addBelow(a):d.addFollowing(a):d.addAbove(a)});return d})}function q(a,e){var c=!s[e]?null:s[e].special?s[e][a]||null:-1!==X.barsAndTildes.indexOf(e)?
"lambe"===a||"alda"===a&&2<=s[e].length?2:m[a].wide?0:1:null==m[a]||null===m[a][e]?null:null!=m[a][e]?m[a][e]:null!=m[a].others?m[a].others:m[a];return null==c?null:s[e][a]||s[e][c]||""}function z(a){a=a||Y;return{font:a.font||Z,block:a.block,plain:a.plain,doubleNasalsWithTildeBelow:a.doubleNasalsWithTildeBelow,noAchLaut:a.noAchLaut}}function A(a,e){var e=z(e),c=e.font.makeColumn;return a.split(/\n\n\n+/).map(function(a){return a.split(/\n\n/).map(function(a){return a.split(/\n/).map(function(a){var d=
[],g=[];a.toLowerCase().replace(/(0[\dab]+)|(\d+)|([\w\u00e1\u00e9\u00ed\u00f3\u00fa\u00eb\u00e2\u00ea\u00ee\u00f4\u00fb\u00f1']+)|(.)/g,function(a,b,f,n,h){if(n){n=aa(n);try{H[n]?g.push.apply(g,I.decodeWord(H[n],c)):g.push.apply(g,ba(n,e))}catch(ca){g.push(c().addError("Cannot transcribe "+JSON.stringify(g)+" because "+ca.message))}}else b?g.push.apply(g,J(b,12,e)):f?g.push.apply(g,J(f,10,e)):K[h]?g.push(c(K[h])):" "===h?(d.push(g),g=[]):g.push(c().addError("Cannot transcribe "+JSON.stringify(h)))});
g.length&&d.push(g);return d})})})}function L(a,e,c){var f=function(b){return b.length?L(a,e,c.concat(b),b[b.length-1]):a(c)},d=function(a){return y[a]?b("long-carrier").addAbove(y[a]):b("short-carrier").addAbove(a)},b=e.font.makeColumn,G=function(a){var b=function(b){return b?a?-1!==B.indexOf(a)&&b.canAddAbove(a)?(b.addAbove(a),u(function(b){return f([b])},b)):u(function(b){return f([d(a),b])},b):u(function(b){return f([b])},b):a?u(function(b){return f([b])},d(a)):f([])},c=e.font.makeColumn;return function(d){return"n"===
d?function(a){return"n"===a?e.doubleNasalsWithTildeBelow?b(c("numen").addTildeBelow()):b(c("numen").addTildeAbove()):"t"===a?function(a){return"h"===a?b(c("thule").addTildeAbove()):b(c("tinco").addTildeAbove())(a)}:"d"===a?b(c("ando").addTildeAbove()):"c"===a?b(c("quesse").addTildeAbove()):"g"===a?b(c("ungwe").addTildeAbove()):"j"===a?b(c("anca").addTildeAbove()):"w"===a?b(c("nwalme").addAbove("w")):b(c("numen"))(a)}:"m"===d?function(a){return"m"===a?e.doubleNasalsWithTildeBelow?b(c("malta").addTildeBelow()):
b(c("malta").addTildeAbove()):"p"===a?b(c("parma").addTildeAbove()):"b"===a?b(c("umbar").addTildeAbove()):"f"===a?b(c("formen").addTildeAbove()):"v"===a?b(c("ampa").addTildeAbove()):b(c("malta"))(a)}:"\u00f1"===d?function(a){return"c"===a?b(c("quesse").addTildeAbove()):"g"===a?b(c("ungwe").addTildeAbove()):b(c("nwalme"))(a)}:"t"===d?function(a){return"t"===a?b(c("tinco").addTildeBelow()):"h"===a?b(c("thule")):b(c("tinco"))(a)}:"p"===d?function(a){return"p"===a?b(c("parma").addTildeBelow()):b(c("parma"))(a)}:
"c"===d?function(a){return"c"===a?b(c("calma")):"h"===a?e.noAchLaut?b(c("calma")):b(c("hwesta")):b(c("quesse"))(a)}:"d"===d?function(a){return"d"===a?b(c("ando").addTildeBelow()):"h"===a?b(c("anto")):b(c("ando"))(a)}:"b"===d?function(a){return"b"===a?b(c("umbar").addTildeBelow()):b(c("umbar"))(a)}:"g"===d?function(a){return"g"===a?b(c("ungwe").addTildeBelow()):"h"===a?b(c("unque")):b(c("ungwe"))(a)}:"f"===d?function(a){return"f"===a?b(c("formen").addTildeBelow()):b(c("formen"))(a)}:"v"===d?b(c("ampa")):
"j"===d?b(c("anca")):"s"===d?function(a){return"s"===a?b(c("silme").addTildeBelow()):"h"===a?b(c("harma")):b(c("silme"))(a)}:"z"===d?function(a){return"z"===a?b(c("esse").addTildeBelow()):b(c("esse"))(a)}:"h"===d?function(a){return"w"===a?b(c("hwesta-sindarinwa")):b(c("hyarmen"))(a)}:"r"===d?function(a){return"r"===a?b(c("romen").addTildeBelow()):"h"===a?b(c("arda")):""===a?b(c("ore"))(a):b(c("romen"))(a)}:"l"===d?function(a){return"l"===a?b(c("lambe").addTildeBelow()):"h"===a?b(c("alda")):b(c("lambe"))(a)}:
"i"===d?b(c("anna")):"u"===d?b(c("vala")):"w"===d?function(a){return"h"===a?b(c("hwesta-sindarinwa")):b(c("vala"))(a)}:"e"===d&&(!a||"a"===a)?b(c("yanta")):"y"===d?b(c("wilya").addBelow("y")):"\u00e1"===d?b(c("wilya").addAbove("a")):y[d]&&-1==B.indexOf(d)?b(c("long-carrier").addAbove(y[d])):b()(d)}};return function(a){return-1!==B.indexOf(a)?G(a):G()(a)}}function u(a,e){var c=function(c){var d=function(b){return function(c){return"s"===c?b.canAddBelow("s")?a(b.addBelow("s")):M(function(c){return function(d){if(""===
d){if(b.canAddFollowing("s-final")&&0===c--)b.addFollowing("s-final");else if(b.canAddFollowing("s-inverse")&&0===c--)b.addFollowing("s-inverse");else if(b.canAddFollowing("s-extended")&&0===c--)b.addFollowing("s-extended");else if(b.canAddFollowing("s-flourish"))b.addFollowing("s-flourish"),0<c&&b.addError("Following S only has 3 alternate flourishes.");else return a(b)("s")(d);return a(b)(d)}return a(b)("s")(d)}}):a(b)(c)}};return function(a){return"y"===a&&c.canAddBelow("y")?d(c.addBelow("y")):
d(c)(a)}};return e.canAddAbove("w")?function(a){return"w"===a?c(e.addAbove("w")):c(e)(a)}:c(e)}function M(a,e){e=e||0;return function(c){return"'"===c?M(a,e+1):a(e)(c)}}function C(a){a=a||da;return{font:a.font||ea,block:a.block,plain:a.plain,vilya:a.vilya,harma:a.harma,classical:a.classical,iuRising:a.isRising,longHalla:a.longHalla}}function D(a,e){var e=C(e),c=e.font.makeColumn;return a.split(/\n\n\n+/).map(function(a){return a.split(/\n\n/).map(function(a){return a.split(/\n/).map(function(a){var d=
[],g=[];a.toLowerCase().replace(/([\w\u00e1\u00e9\u00ed\u00f3\u00fa\u00eb\u00e2\u00ea\u00ee\u00f4\u00fb\u00f1']+)|(.)/g,function(a,b,f){if(b)try{g.push.apply(g,fa(ga(b),e))}catch(n){g.push(c().addError("Cannot transcribe "+JSON.stringify(b)+" because "+n.message))}else N[f]?g.push(c(N[f])):" "===f?(d.push(g),g=[]):g.push(c().addError("Cannot transcribe "+JSON.stringify(f)))});g.length&&d.push(g);return d})})})}function O(a,e,c,f){var d=function(b){var d=b.pop();return P(function(d){d=b.concat(d).filter(Boolean);
return d.length?O(a,e,c.concat(d),d[d.length-1]):a(c)},e,d)},b=e.font.makeColumn;return function(a){return"n"===a?function(a){return"n"===a?d([b("numen").addTildeBelow()]):"t"===a?d([b("anto")]):"d"===a?d([b("ando")]):"g"===a?function(a){return"w"===a?d([b("ungwe")]):d([b("anga")])(a)}:"c"===a?function(a){return"w"===a?d([b("unque")]):d([b("anca")])(a)}:d([b("numen")])(a)}:"m"===a?function(a){return"m"===a?d([b("malta").addTildeBelow()]):"p"===a?d([b("ampa")]):"b"===a?d([b("umbar")]):d([b("malta")])(a)}:
"\u00f1"===a?function(a){return"g"===a?function(a){return"w"===a?d([b("ungwe")]):d([b("anga")])(a)}:"c"===a?function(a){return"w"===a?d([b("unque")]):d([b("anca")])}:d([b("noldo")])(a)}:"t"===a?function(a){return"t"===a?function(a){return"y"===a?d([b("tinco").addBelow("y").addTildeBelow()]):d([b("tinco").addTildeBelow()])(a)}:"y"===a?d([b("tinco").addBelow("y")]):"h"===a?d([b("thule")]):"s"===a?function(a){return""===a?d([b("tinco").addFollowing("s")])(a):d([b("tinco"),b("silme")])(a)}:d([b("tinco")])(a)}:
"p"===a?function(a){return"p"===a?function(a){return"y"===a?d([b("parma").addBelow("y").addTildeBelow()]):d([b("parma").addTildeBelow()])(a)}:"y"===a?d([b("parma").addBelow("y")]):"s"===a?function(a){return""===a?d([b("parma").addFollowing("s")])(a):d([b("parma"),b("silme")])(a)}:d([b("parma")])(a)}:"c"===a?function(a){return"c"===a?d([b("calma").addTildeBelow()]):"s"===a?d([b("calma").addBelow("s")]):"h"===a?d([b("harma")]):"w"===a?d([b("quesse")]):d([b("calma")])(a)}:"f"===a?d([b("formen")]):"v"===
a?e.vilya?d([b("wilya")]):d([b("vala")]):"w"===a?e.vilya?d([])("u"):d([b("wilya")]):"r"===a?function(a){return"d"===a?d([b("arda")]):"h"===a?d([b("halla").addError("R should preceed H in the HR diagraph in Classical mode."),b("romen").addError("R should preceed H in the HR diagraph in Classical mode.")]):e.classical?f&&f.above&&""!==a&&-1!==Q.indexOf(a)?d([b("ore")])(a):d([b("romen")])(a):""===a||-1===Q.indexOf(a)?d([b("ore")])(a):d([b("romen")])(a)}:"l"===a?function(a){return"l"===a?function(a){return"y"===
a?d([b("lambe").addBelow("y").addTildeBelow()]):d([b("lambe").addTildeBelow()])(a)}:"y"===a?d([b("lambe").addBelow("y")]):"h"===a?d([b("halla").addError("L should preceed H in the HL diagraph in Classical mode."),b("lambe").addError("L should preceed H in the HL diagraph in Classical mode.")]):"d"===a?d([b("alda")]):"b"===a?d([b("lambe"),b("umbar")]):d([b("lambe")])(a)}:"s"===a?function(a){return"s"===a?d([b("esse")]):d([b("silme")])(a)}:"h"===a?function(a){return"l"===a?d([b("halla"),b("lambe")]):
"r"===a?d([b("halla"),b("romen")]):"w"===a?d([b("hwesta")]):"t"===a?d([b("harma")]):"y"===a?e.classical&&e.harma?d([b("hyarmen")]):d([b("hyarmen").addBelow("y")]):e.classical?e.harma?d([b("harma")])(a):f?d([b("hyarmen")])(a):d([b("harma")])(a):d([b("hyarmen")])(a)}:"d"===a?d([b("ando").addError("D cannot appear except after N, L, or R")]):"b"===a?d([b("umbar").addError("B cannot appear except after M or L")]):"g"===a?d([b("anga").addError("G cannot appear except after N or \u00d1")]):"j"===a?d([b().addError("J cannot be transcribed in Classical Mode")]):
d([])(a)}}function P(a,e,c){var f=e.font.makeColumn;return function(d){if("a"===d)return function(b){return"i"===b?a([c,f("yanta","a")]):"u"===b?a([c,f("ure","a")]):c&&c.canAddAbove("a")?(c.addAbove("a"),a([c])(b)):a([c,f("short-carrier","a")])(b)};if("e"===d)return function(b){return"u"===b?a([c,f("ure","e")]):c&&c.canAddAbove("e")?a([c.addAbove("e")])(b):a([c,f("short-carrier","e")])(b)};if("i"===d)return function(b){return"u"===b?e.iuRising?a([c,f("anna","u").addBelow("y")]):a([c,f("ure","i")]):
c&&c.canAddAbove("i")?a([c.addAbove("i")])(b):a([c,f("short-carrier","i")])(b)};if("o"===d)return function(b){return"i"===b?a([c,f("yanta","o")]):c&&c.canAddAbove("o")?a([c.addAbove("o")])(b):a([c,f("short-carrier","o")])(b)};if("u"===d)return function(b){return"i"===b?a([c,f("yanta","u")]):c&&c.canAddAbove("u")?a([c.addAbove("u")])(b):a([c,f("short-carrier","u")])(b)};if("y"===d){if(c&&c.canAddBelow("y"))return a([c.addBelow("y")]);d=f("anna").addBelow("y");return P(function(b){return a([c].concat(b))},
e,d)}return"\u00e1"===d?a([c,f("long-carrier","a")]):"\u00e9"===d?a([c,f("long-carrier","e")]):"\u00ed"===d?a([c,f("long-carrier","i")]):"\u00f3"===d?c&&c.canAddAbove("\u00f3")?a([c.addAbove("\u00f3")]):a([c,f("long-carrier","o")]):"\u00fa"===d?c&&c.canAddAbove("\u00fa")?a([c.addAbove("\u00fa")]):a([c,f("long-carrier","u")]):a([c])(d)}}function r(a,e){var c=!t[e]||-1!==ha.indexOf(e)?null:t[e].special?t[e][a]||null:-1!==ia.barsAndTildes.indexOf(e)?"lambe"===a||"alda"===a&&2<=t[e].length?2:o[a].wide?
0:1:null==o[a]||null===o[a][e]?null:null!=o[a][e]?o[a][e]:null!=o[a].others?o[a].others:o[a];return null==c?null:t[e][a]||t[e][c]||null}function R(){if(document.body.classList&&document.querySelectorAll&&S.forEach){var a=document.querySelectorAll(".tengwar");S.forEach.call(a,function(a){var c=a.dataset,f,d,b;b="div"===a.tagName.toLowerCase();c?(f=c.tengwar,d=c.mode,c=c.encoding):(f=a.getAttribute("data-tengwar"),d=a.getAttribute("data-mode"),c=a.getAttribute("data-encoding"));c?a.innerText=T.transcribe(c,
{block:b}):f&&(d=d||"general-use",c=a.classList.contains("parmaite")?ja:T,a.innerHTML=("general-use"===d?ka:la).transcribe(f,{block:b,font:c}))})}}var h={module$exports:function(a,e){e=e||function(a){throw Error(a);};return function(c){var f,d=a.apply(null,[function(a){f=a;var c=e;return function(a){""!==a&&c("Unexpected "+JSON.stringify(a));return function $(){return $}}}].concat(Array.prototype.slice.call(arguments,1)));for(Array.prototype.forEach.call(c,function(a){d=d(a)});!f;)d=d("");return f}}};
h.module$exports&&(h=h.module$exports);var v={module$exports:function(a){return a.replace(ma,function(a,c){return U[c]})}},U={k:"c",x:"cs",qu:"cw",q:"cw",ph:"f",bh:"v","\u00eb":"e","\u00e2":"\u00e1","\u00ea":"\u00e9","\u00ee":"\u00ed","\u00f4":"\u00f3","\u00fb":"\u00fa"},ma=RegExp("("+Object.keys(U).join("|")+")","ig");v.module$exports&&(v=v.module$exports);var w={module$exports:{"-":"comma",",":"comma",":":"comma",";":"full-stop",".":"full-stop","!":"exclamation-point","?":"question-mark","(":"open-paren",
")":"close-paren",">":"flourish-left","<":"flourish-right"}};w.module$exports&&(w=w.module$exports);var E={encode:function(a){return a.map(function(a){return a.map(function(a){return a.map(function(a){return a.map(function(a){return a.map(function(a){var c=[];a.above&&c.push(a.above);a.below&&c.push(a.below);a.following&&c.push(a.following);a.tildeAbove&&c.push("tilde-above");a.tildeBelow&&c.push("tilde-below");return c.length?a.tengwa+":"+c.join(","):a.tengwa}).join(";")}).join(" ")}).join("\n")}).join("\n\n")}).join("\n\n\n")},
decode:function(a,e){return a.split("\n\n\n").map(function(a){return a.split("\n\n").map(function(a){return a.split("\n").map(function(a){return a.split(" ").map(function(a){return F(a,e)})})})})}};E.decodeWord=F;var p={tengwar:[["tinco","parma","calma","quesse"],["ando","umbar","anga","ungwe"],["thule","formen","harma","hwesta"],["anto","ampa","anca","unque"],["numen","malta","noldo","nwalme"],["ore","vala","anna","wilya"],["romen","arda","lambe","alda"],["silme","silme-nuquerna","esse","esse-nuquerna"],
["hyarmen","hwesta-sindarinwa","yanta","ure"],["halla","short-carrier","long-carrier","round-carrier"],["tinco-extended","parma-extended","calma-extended","quesse-extended"]],tehtarAbove:"aeiou\u00e1\u00e9\u00ed\u00f3\u00faw".split(""),tehtarBelow:["y","s","o-under"],tehtarFollowing:["s-final","s-inverse","s-extended","s-flourish"],barsAndTildes:"tilde-above tilde-below tilde-high-above tilde-far-below bar-above bar-below bar-high-above bar-far-below".split(" ")};p.tehtar=[].concat(p.tehtarAbove,
p.tehtarBelow,p.tehtarFollowing,p.barsAndTildes);p.aliases={vilya:"wilya",aha:"harma"};var i={},na=Array.prototype;i.module$exports=function(a,e,c){var f=c.font.makeColumn;return na.map.call(parseInt(a,e).toString(e),function(a){return f("#"+a)})};i.module$exports&&(i=i.module$exports);var V={tinco:"1",parma:"q",calma:"a",quesse:"z",ando:"2",umbar:"w",anga:"s",ungwe:"x",thule:"3",formen:"e",harma:"d",hwesta:"c",anto:"4",ampa:"r",anca:"f",unque:"v",numen:"5",malta:"t",noldo:"g",nwalme:"b",ore:"6",
vala:"y",anna:"h",wilya:"n",romen:"7",arda:"u",lambe:"j",alda:"m",silme:"8","silme-nuquerna":"i",esse:"k","esse-nuquerna":",",hyarmen:"9","hwesta-sindarinwa":"o",yanta:"l",ure:".",halla:"\u00bd","short-carrier":"`","long-carrier":"~","round-carrier":"]","tinco-extended":"!","parma-extended":"Q","calma-extended":"A","quesse-extended":"Z",comma:"=","full-stop":"-","exclamation-point":"\u00c1","question-mark":"\u00c0","open-paren":"&#140;","close-paren":"&#156;","flourish-left":"&#286;","flourish-right":"&#287;",
"#0":"\uf8ff","#1":"\u00d2","#2":"\u00da","#3":"\u00db","#4":"\u00d9","#5":"\u0131","#6":"\u02c6","#7":"\u02dc","#8":"\u00af","#9":"\u02d8","#10":"\u02d9","#11":"\u02da"},W={a:"#EDC",e:"$RFV",i:"%TGB",o:"^YHN",u:"& U J M &#256; &#257; &#258; &#259;".split(" "),"\u00f3":["&#260;","&#261;","&#262;","&#263;"],"\u00fa":["&#264;","&#265;","&#266;","&#267;"],"\u00ed":["&#212;","&#213;","&#214;","&#215;"],w:"\u00e8\u00e9\u00ea\u00eb",y:"\u00cc\u00cd\u00ce\u00cf\u00b4","o-under":["\u00e4","&#229;","\u00e6",
"\u00e7","|"],s:{special:!0,calma:"|",quesse:"|","short-carrier":"}"},"s-final":{special:!0,tinco:"+",ando:"+",numen:"+",lambe:"_"},"s-inverse":{special:!0,tinco:"\u00a1"},"s-extended":{special:!0,tinco:"&#199;"},"s-flourish":{special:!0,tinco:"&#163;",lambe:"&#165;"},"tilde-above":"Pp","tilde-below":[":",";","&#176;"],"tilde-high-above":")0","tilde-far-below":"?/","bar-above":"{[","bar-below":['"',"'","&#184;"],"bar-high-above":"\u00ec\u00ee","bar-far-below":"\u00ed\u00ef"},l={},X=p,oa=l.tengwar=
V,s=l.tehtar=W,m=l.positions={tinco:{o:3,w:3,others:2},parma:{o:3,w:3,others:2},calma:{o:3,w:3,u:3,"o-under":1,others:2},quesse:{o:3,w:3,"o-under":1,others:2},ando:{wide:!0,e:1,o:2,"\u00f3":1,"\u00fa":1,others:0},umbar:{wide:!0,e:1,o:2,"\u00f3":1,"\u00fa":1,others:0},anga:{wide:!0,e:1,"\u00f3":1,"\u00fa":1,others:0},ungwe:{wide:!0,e:1,o:1,"\u00f3":1,"\u00fa":1,others:0},thule:{others:3},formen:3,harma:{e:0,o:3,u:7,"\u00f3":2,"\u00fa":2,w:0,others:1},hwesta:{e:0,o:3,u:7,w:0,others:1},anto:{wide:!0,
"\u00f3":1,"\u00fa":1,others:0},ampa:{wide:!0,"\u00f3":1,"\u00fa":1,others:0},anca:{wide:!0,u:7,"\u00f3":1,"\u00fa":1,others:0},unque:{wide:!0,u:7,others:0},numen:{wide:!0,"\u00f3":1,"\u00fa":1,others:0},malta:{wide:!0,"\u00f3":1,"\u00fa":1,others:0},noldo:{wide:!0,"\u00f3":1,"\u00fa":1,others:0},nwalme:{wide:!0,"\u00f3":1,"\u00fa":1,others:0},ore:{e:3,o:3,u:3,"\u00f3":3,"\u00fa":3,others:1},vala:{e:3,o:3,u:3,"\u00f3":3,"\u00fa":3,others:1},anna:{e:3,o:3,u:3,"\u00f3":2,"\u00fa":2,others:1},wilya:{e:3,
o:3,u:3,"\u00f3":3,"\u00fa":3,others:1},romen:{e:3,o:3,u:3,"\u00f3":2,"\u00fa":2,y:null,"o-under":null,others:1},arda:{a:1,e:3,i:1,o:3,u:3,"\u00ed":1,"\u00f3":2,"\u00fa":2,y:null,"o-under":null,others:0},lambe:{wide:!0,e:1,y:4,"\u00f3":1,"\u00fa":1,"o-under":null,others:0},alda:{wide:!0,"o-under":null,others:1},silme:{y:3,"o-under":2,others:null},"silme-nuquerna":{e:3,o:3,u:3,"\u00f3":3,"\u00fa":3,y:null,"o-under":null,others:1},esse:{y:null,others:null},"esse-nuquerna":{e:3,o:3,u:3,"\u00f3":3,"\u00fa":3,
others:1},hyarmen:3,"hwesta-sindarinwa":{o:2,u:2,"\u00f3":1,"\u00fa":2,others:0},yanta:{e:3,o:3,u:3,"\u00f3":2,"\u00fa":2,others:1},ure:{e:3,o:3,u:3,"\u00f3":3,"\u00fa":3,others:1},halla:{others:null},"short-carrier":3,"long-carrier":{y:null,"o-under":null,others:3},"round-carrier":3,"tinco-extended":3,"parma-extended":3,"calma-extended":{o:3,u:7,"\u00f3":2,"\u00fa":2,others:1},"quesse-extended":{o:0,u:7,others:1}};l.transcribe=function(a,e){var e=e||{},c=e.plain||!1,f=e.block||!1,d=f?"<p>":"",b=
f?"<br>":"",h=f?"</p>":"";return a.map(function(a){return a.map(function(a){return d+a.map(function(a){return a.map(function(a){return a.map(function(a){var b=a.tengwa||"anna",d=[];a.above&&d.push(a.above);a.below&&d.push(a.below);a.tildeBelow&&d.push("tilde-below");a.tildeAbove&&d.push("tilde-above");a.following&&d.push(a.following);d=oa[b]+d.map(function(a){return q(b,a)}).join("");a.errors&&!c&&(d='<abbr class="error" title="'+a.errors.join("\n").replace(/"/g,"&quot;")+'">'+d+"</abbr>");return d}).join("")}).join(" ")}).join(b+
"\n")+h}).join("\n\n")}).join("\n\n\n")};l.tehtaForTengwa=q;l.makeColumn=function(a,e,c){return new j(a,e,c)};var j=function(a,e,c){this.above=e;this.tildeAbove=void 0;this.tengwa=a;this.tildeBelow=void 0;this.below=c;this.error=this.following=void 0};j.prototype.canAddAbove=function(a){return!this.above&&!!q(this.tengwa,a)||!this.below&&("silme"===this.tengwa&&q("silme-nuquerna",a)||"esse"===this.tengwa&&q("esse-nuquerna",a))};j.prototype.addAbove=function(a){"silme"===this.tengwa&&(this.tengwa=
"silme-nuquerna");"esse"===this.tengwa&&(this.tengwa="esse-nuquerna");this.above=a;return this};j.prototype.canAddBelow=function(a){return!this.below&&!!q(this.tengwa,a)};j.prototype.addBelow=function(a){this.below=a;return this};j.prototype.addTildeAbove=function(){this.tildeAbove=!0;return this};j.prototype.addTildeBelow=function(){this.tildeBelow=!0;return this};j.prototype.canAddFollowing=function(a){return!this.following&&!!q(this.tengwa,a)};j.prototype.addFollowing=function(a){this.following=
a;return this};j.prototype.addError=function(a){this.errors=this.errors||[];this.errors.push(a);return this};var x={},Z=l,I=E,aa=v,K=w,J=i,Y={};x.transcribe=function(a,e){e=z(e);return e.font.transcribe(A(a,e),e)};x.encode=function(a,e){e=z(e);return I.encode(A(a,e),e)};x.parse=A;var H={iant:"yanta;tinco:a,tilde-above",iaur:"yanta;vala:a;ore",baranduiniant:"umbar;romen:a;ando:a,tilde-above;anna:u;yanta;anto:a,tilde-above",ioreth:"yanta;romen:o;thule:e",noldo:"nwalme;lambe:o;ando;short-carrier:o",
noldor:"nwalme;lambe:o;ando;ore:o",is:"short-carrier:i,s"},ba=h(function(a,e){return L(a,e,[])}),B="aeiou\u00f3\u00fa",y={"\u00e1":"a","\u00e9":"e","\u00ed":"i","\u00f3":"o","\u00fa":"u"};x.parseTengwaAnnotations=u;var i={},ea=l,ga=v,N=w,da={};i.transcribe=function(a,e){e=C(e);return e.font.transcribe(D(a,e),e)};i.encode=function(a,e){e=C(e);return E.encode(D(a,e),e)};i.parse=D;var fa=h(function(a,e){return O(a,e,[])}),Q="aeiouy\u00e1\u00e9\u00ed\u00f3\u00fa",h={},ia=p,pa=h.tengwar=V,t=h.tehtar=W,
o=h.positions={tinco:2,parma:2,calma:{y:1,"o-under":1,others:2},quesse:{y:1,"o-under":1,others:2},ando:{wide:!0,others:0},umbar:{wide:!0,others:0},anga:{wide:!0,others:0},ungwe:{wide:!0,others:0},thule:{a:3,w:3,others:2},formen:{a:3,w:3,others:2},harma:{a:0,e:0,i:1,o:1,u:1,w:0,others:1},hwesta:{a:0,e:0,i:1,o:1,u:1,w:0,others:1},anto:{wide:!0,others:0},ampa:{wide:!0,others:0},anca:{wide:!0,others:0},unque:{wide:!0,others:0},numen:{wide:!0,others:0},malta:{wide:!0,others:0},noldo:{wide:!0,others:0},
nwalme:{wide:!0,others:0},ore:{a:1,e:2,i:1,o:2,u:3,others:1},vala:{a:1,e:2,i:2,o:2,w:1,y:1,others:3},anna:{a:1,e:2,i:2,o:2,u:3,w:3,others:1},wilya:{a:1,e:1,i:2,o:1,u:1,others:1},romen:{a:1,e:1,i:2,o:1,u:1,y:null,"o-under":null,others:1},arda:{a:1,e:1,i:2,o:1,u:1,w:1,y:null,"o-under":null,others:0},lambe:{wide:!0,e:1,y:4,w:0,"o-under":null,others:0},alda:{wide:!0,w:0,y:null,"o-under":null,others:1},silme:{y:2,"o-under":2,others:null},"silme-nuquerna":{e:2,y:null,"o-under":null,others:1},esse:{others:null},
"esse-nuquerna":{e:2,y:null,"o-under":null,others:1},hyarmen:{y:1,others:3},"hwesta-sindarinwa":{w:1,y:1,others:0},yanta:{a:1,others:2},ure:{a:1,others:2},halla:{others:null},"short-carrier":{y:null,others:3},"long-carrier":{y:null,"o-under":null,others:3},"round-carrier":2,"tinco-extended":{a:3,w:3,y:3,others:2},"parma-extended":{a:3,w:3,y:3,others:2},"calma-extended":{i:1,w:1,y:0,others:0},"quesse-extended":{i:1,w:1,y:0,others:0}};h.transcribe=function(a,e){var e=e||{},c=e.plain||!1,f=e.block||
!1,d=f?"<p>":"",b=f?"<br>":"",h=f?"</p>":"";return a.map(function(a){return a.map(function(a){return d+a.map(function(a){return a.map(function(a){return a.map(function(a){var b=a.tengwa||"anna",d=[];a.above&&d.push(a.above);a.below&&d.push(a.below);a.tildeBelow&&d.push("tilde-below");a.tildeAbove&&d.push("tilde-above");a.following&&d.push(a.following);d=pa[b]+d.map(function(a){return r(b,a)}).join("");a.errors&&!c&&(d='<abbr class="error" title="'+a.errors.join("\n").replace(/"/g,"&quot;")+'">'+d+
"</abbr>");return d}).join("")}).join(" ")}).join(b+"\n")+h}).join("\n\n")}).join("\n\n\n")};h.tehtaForTengwa=r;var ha="\u00e1\u00e9\u00ed\u00f3\u00fa";h.makeColumn=function(a,e,c){return new k(a,e,c)};var k=function(a,e,c){this.above=e;this.tildeAbove=void 0;this.tengwa=a;this.tildeBelow=void 0;this.below=c;this.error=this.following=void 0};k.prototype.canAddAbove=function(a){return!this.above&&!!r(this.tengwa,a)||!this.below&&("silme"===this.tengwa&&r("silme-nuquerna",a)||"esse"===this.tengwa&&
r("esse-nuquerna",a))};k.prototype.addAbove=function(a){"silme"===this.tengwa&&(this.tengwa="silme-nuquerna");"esse"===this.tengwa&&(this.tengwa="esse-nuquerna");this.above=a;return this};k.prototype.canAddBelow=function(a){return!this.below&&!!r(this.tengwa,a)};k.prototype.addBelow=function(a){this.below=a;return this};k.prototype.addTildeAbove=function(){this.tildeAbove=!0;return this};k.prototype.addTildeBelow=function(){this.tildeBelow=!0;return this};k.prototype.canAddFollowing=function(a){return!this.following&&
!!r(this.tengwa,a)};k.prototype.addFollowing=function(a){this.following=a;return this};k.prototype.addError=function(a){this.errors=this.errors||[];this.errors.push(a);return this};var ka=x,la=i,T=l,ja=h,S=Array.prototype;"complete"===document.readyState?R():document.addEventListener("DOMContentLoaded",R,!0)})();
